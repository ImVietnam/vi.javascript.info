# Chu·ªói

Trong JavaScript, d·ªØ li·ªáu vƒÉn b·∫£n ƒë∆∞·ª£c l∆∞u tr·ªØ d∆∞·ªõi d·∫°ng chu·ªói. Kh√¥ng c√≥ lo·∫°i ri√™ng cho m·ªôt k√Ω t·ª±.

ƒê·ªãnh d·∫°ng b√™n trong c·ªßa chu·ªói lu√¥n l√† [UTF-16](https://en.wikipedia.org/wiki/UTF-16), ƒë·ªãnh d·∫°ng n√†y kh√¥ng b·ªã r√†ng bu·ªôc v·ªõi m√£ h√≥a trang.

## D·∫•u ngo·∫∑c k√©p

H√£y nh·ªõ l·∫°i c√°c lo·∫°i d·∫•u ngo·∫∑c k√©p.

C√°c chu·ªói c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t trong d·∫•u ngo·∫∑c ƒë∆°n, d·∫•u ngo·∫∑c k√©p ho·∫∑c d·∫•u backticks:

```js
let single = 'd·∫•u ngo·∫∑c ƒë∆°n';
let double = "d·∫•u ngo·∫∑c k√©p";

let backticks = `d·∫•u backticks`;
```

D·∫•u ngo·∫∑c ƒë∆°n v√† d·∫•u ngo·∫∑c k√©p v·ªÅ c∆° b·∫£n l√† gi·ªëng nhau. Tuy nhi√™n, Backticks cho ph√©p ch√∫ng ta nh√∫ng b·∫•t k·ª≥ bi·ªÉu th·ª©c n√†o v√†o chu·ªói, b·∫±ng c√°ch g√≥i n√≥ trong `${‚Ä¶}`:

```js run
function sum(a, b) {
  return a + b;
}

alert(`1 + 2 = ${sum(1, 2)}.`); // 1 + 2 = 3.
```

M·ªôt ∆∞u ƒëi·ªÉm kh√°c c·ªßa vi·ªác s·ª≠ d·ª•ng backticks l√† ch√∫ng cho ph√©p m·ªôt chu·ªói tr·∫£i d√†i tr√™n nhi·ªÅu d√≤ng:

```js run
let guestList = `Guests:
 * John
 * Pete
 * Mary
`;

alert(guestList); // m·ªôt danh s√°ch kh√°ch, nhi·ªÅu d√≤ng
```

Tr√¥ng t·ª± nhi√™n nh·ªâ? Nh∆∞ng d·∫•u ngo·∫∑c ƒë∆°n ho·∫∑c d·∫•u ngo·∫∑c k√©p kh√¥ng ho·∫°t ƒë·ªông theo c√°ch n√†y.

N·∫øu ch√∫ng ta s·ª≠ d·ª•ng ch√∫ng v√† c·ªë g·∫Øng s·ª≠ d·ª•ng nhi·ªÅu d√≤ng, s·∫Ω c√≥ l·ªói:

```js run
let guestList = "Guests: // Error: Unexpected token ILLEGAL
  * John";
```

D·∫•u ngo·∫∑c ƒë∆°n v√† d·∫•u ngo·∫∑c k√©p xu·∫•t hi·ªán t·ª´ th·ªùi c·ªï ƒë·∫°i khi t·∫°o ng√¥n ng·ªØ khi nhu c·∫ßu v·ªÅ chu·ªói nhi·ªÅu d√≤ng kh√¥ng ƒë∆∞·ª£c t√≠nh ƒë·∫øn. Backticks xu·∫•t hi·ªán mu·ªôn h∆°n nhi·ªÅu v√† do ƒë√≥ linh ho·∫°t h∆°n.

Backticks c≈©ng cho ph√©p ch√∫ng ta ch·ªâ ƒë·ªãnh m·ªôt "h√†m m·∫´u" tr∆∞·ªõc backtick ƒë·∫ßu ti√™n. C√∫ ph√°p l√†: <code>func&#96;string&#96;</code>. H√†m `func` ƒë∆∞·ª£c g·ªçi t·ª± ƒë·ªông, nh·∫≠n chu·ªói v√† c√°c bi·ªÉu th·ª©c ƒë∆∞·ª£c nh√∫ng v√† c√≥ th·ªÉ x·ª≠ l√Ω ch√∫ng. ƒê√¢y ƒë∆∞·ª£c g·ªçi l√† "m·∫´u ƒë∆∞·ª£c g·∫Øn th·∫ª". T√≠nh nƒÉng n√†y gi√∫p tri·ªÉn khai t·∫°o khu√¥n m·∫´u t√πy ch·ªânh d·ªÖ d√†ng h∆°n nh∆∞ng hi·∫øm khi ƒë∆∞·ª£c s·ª≠ d·ª•ng trong th·ª±c t·∫ø. B·∫°n c√≥ th·ªÉ ƒë·ªçc th√™m v·ªÅ n√≥ trong [h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng](mdn:/JavaScript/Reference/Template_literals#Tagged_templates).

## K√Ω t·ª± ƒë·∫∑c bi·ªát

V·∫´n c√≥ th·ªÉ t·∫°o chu·ªói nhi·ªÅu d√≤ng v·ªõi d·∫•u nh√°y ƒë∆°n v√† k√©p b·∫±ng c√°ch s·ª≠ d·ª•ng c√°i g·ªçi l√† "k√Ω t·ª± d√≤ng m·ªõi", ƒë∆∞·ª£c vi·∫øt l√† `\n`, bi·ªÉu th·ªã ng·∫Øt d√≤ng:

```js run
let guestList = "Guests:\n * John\n * Pete\n * Mary";

alert(guestList); // m·ªôt danh s√°ch kh√°ch nhi·ªÅu d√≤ng
```

V√≠ d·ª•, hai d√≤ng n√†y b·∫±ng nhau, nh∆∞ng vi·∫øt kh√°c nhau:

```js run
let str1 = "Hello\nWorld"; // hai d√≤ng s·ª≠ d·ª•ng m·ªôt "k√Ω t·ª± d√≤ng m·ªõi"

// hai d√≤ng s·ª≠ d·ª•ng m·ªôt d√≤ng m·ªõi b√¨nh th∆∞·ªùng v√† backticks
let str2 = `Hello
World`;

alert(str1 == str2); // true
```

C√≥ nh·ªØng k√Ω t·ª± "ƒë·∫∑c bi·ªát" kh√°c, √≠t ph·ªï bi·∫øn h∆°n.

ƒê√¢y l√† danh s√°ch ƒë·∫ßy ƒë·ªß:

| Nh√¢n v·∫≠t | M√¥ t·∫£ |
|--------|-------------|
|`\n`|D√≤ng m·ªõi|
|`\r`|Tr·ªü v·ªÅ ƒë·∫ßu h√†ng: kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng m·ªôt m√¨nh. C√°c t·ªáp vƒÉn b·∫£n Windows s·ª≠ d·ª•ng k·∫øt h·ª£p hai k√Ω t·ª± `\r\n` ƒë·ªÉ bi·ªÉu th·ªã ng·∫Øt d√≤ng. |
|`\'`, `\"`|Tr√≠ch d·∫´n|
|`\\`|D·∫•u g·∫°ch ch√©o ng∆∞·ª£c|
|`\t`|Tab|
|`\b`, `\f`, `\v`| Backspace, Form Feed, Vertical Tab -- ƒë∆∞·ª£c gi·ªØ l·∫°i ƒë·ªÉ t∆∞∆°ng th√≠ch, kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng hi·ªán nay. |
|`\xXX`|K√Ω t·ª± Unicode v·ªõi Unicode th·∫≠p l·ª•c ph√¢n ƒë√£ cho `XX`, v√≠ d·ª•: `'\x7A'` gi·ªëng nh∆∞ `'z'`.|
|`\uXXXX`|M·ªôt k√Ω hi·ªáu Unicode c√≥ m√£ hex `XXXX` trong m√£ h√≥a UTF-16, v√≠ d·ª• `\u00A9` -- l√† m·ªôt k√Ω hi·ªáu Unicode cho k√Ω hi·ªáu b·∫£n quy·ªÅn `¬©`. N√≥ ph·∫£i c√≥ ch√≠nh x√°c 4 ch·ªØ s·ªë hex. |
|`\u{X‚Ä¶XXXXXX}` (1 ƒë·∫øn 6 k√Ω t·ª± hex)|K√Ω hi·ªáu Unicode v·ªõi m√£ h√≥a UTF-32 nh·∫•t ƒë·ªãnh. M·ªôt s·ªë k√Ω t·ª± hi·∫øm ƒë∆∞·ª£c m√£ h√≥a b·∫±ng hai k√Ω hi·ªáu Unicode, chi·∫øm 4 byte. B·∫±ng c√°ch n√†y, ch√∫ng ta c√≥ th·ªÉ ch√®n m√£ d√†i. |

V√≠ d·ª• v·ªõi Unicode:

```js run
alert( "\u00A9" ); // ¬©
alert( "\u{20331}" ); // ‰Ω´, m·ªôt ch·ªØ t∆∞·ª£ng h√¨nh hi·∫øm c·ªßa Trung Qu·ªëc (m√£ Unicode d√†i)
alert( "\u{1F60D}" ); // üòç, m·ªôt bi·ªÉu t∆∞·ª£ng khu√¥n m·∫∑t t∆∞∆°i c∆∞·ªùi (m·ªôt m√£ Unicode d√†i kh√°c)
```

T·∫•t c·∫£ c√°c k√Ω t·ª± ƒë·∫∑c bi·ªát ƒë·ªÅu b·∫Øt ƒë·∫ßu b·∫±ng k√Ω t·ª± g·∫°ch ch√©o ng∆∞·ª£c `\`. N√≥ c√≤n ƒë∆∞·ª£c g·ªçi l√† "k√Ω t·ª± tho√°t".

Ch√∫ng ta c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng n√≥ n·∫øu ch√∫ng ta mu·ªën ch√®n m·ªôt tr√≠ch d·∫´n v√†o chu·ªói.

V√≠ d·ª•:

```js run
alert( 'I*!*\'*/!*m the Walrus!' ); // *!*I'm*/!* the Walrus!
```

Nh∆∞ b·∫°n c√≥ th·ªÉ th·∫•y, ch√∫ng ta ph·∫£i th√™m v√†o tr∆∞·ªõc tr√≠ch d·∫´n b√™n trong b·∫±ng d·∫•u g·∫°ch ch√©o ng∆∞·ª£c `\'`, v√¨ n·∫øu kh√¥ng n√≥ s·∫Ω cho bi·∫øt k·∫øt th√∫c chu·ªói.

T·∫•t nhi√™n, ch·ªâ nh·ªØng tr√≠ch d·∫´n gi·ªëng v·ªõi nh·ªØng tr√≠ch d·∫´n k√®m theo m·ªõi c·∫ßn ƒë∆∞·ª£c tho√°t. V√¨ v·∫≠y, nh∆∞ m·ªôt gi·∫£i ph√°p tao nh√£ h∆°n, thay v√†o ƒë√≥, ch√∫ng ta c√≥ th·ªÉ chuy·ªÉn sang d·∫•u ngo·∫∑c k√©p ho·∫∑c d·∫•u nh√°y ng∆∞·ª£c:

```js run
alert( `I'm the Walrus!` ); // I'm the Walrus!
```

L∆∞u √Ω r·∫±ng d·∫•u g·∫°ch ch√©o ng∆∞·ª£c `\` ph·ª•c v·ª• cho vi·ªác ƒë·ªçc ch√≠nh x√°c chu·ªói b·∫±ng JavaScript, sau ƒë√≥ bi·∫øn m·∫•t. Chu·ªói trong b·ªô nh·ªõ kh√¥ng c√≥ `\`. B·∫°n c√≥ th·ªÉ th·∫•y r√µ ƒëi·ªÅu ƒë√≥ trong `alert` t·ª´ c√°c v√≠ d·ª• ·ªü tr√™n.

Nh∆∞ng n·∫øu ch√∫ng ta c·∫ßn hi·ªÉn th·ªã d·∫•u g·∫°ch ch√©o ng∆∞·ª£c `\` trong chu·ªói th√¨ sao?

ƒêi·ªÅu ƒë√≥ l√† c√≥ th·ªÉ, nh∆∞ng ch√∫ng ta c·∫ßn nh√¢n ƒë√¥i n√≥ nh∆∞ `\\`:

```js run
alert( `The backslash: \\` ); // D·∫•u g·∫°ch ch√©o ng∆∞·ª£c: \
```

## Chi·ªÅu d√†i chu·ªói

Thu·ªôc t√≠nh `length` c√≥ ƒë·ªô d√†i chu·ªói:

```js run
alert( `My\n`.length ); // 3
```

L∆∞u √Ω r·∫±ng `\n` l√† m·ªôt k√Ω t·ª± "ƒë·∫∑c bi·ªát", v√¨ v·∫≠y ƒë·ªô d√†i th·ª±c s·ª± l√† `3`.

```warn header="`length` l√† thu·ªôc t√≠nh"
Nh·ªØng ng∆∞·ªùi c√≥ ki·∫øn th·ª©c c∆° b·∫£n v·ªÅ m·ªôt s·ªë ng√¥n ng·ªØ kh√°c ƒë√¥i khi g√µ nh·∫ßm b·∫±ng c√°ch g·ªçi `str.length()` thay v√¨ ch·ªâ `str.length`. ƒêi·ªÅu ƒë√≥ kh√¥ng hi·ªáu qu·∫£.

H√£y l∆∞u √Ω r·∫±ng `str.length` l√† thu·ªôc t√≠nh s·ªë, kh√¥ng ph·∫£i h√†m. Kh√¥ng c·∫ßn th√™m d·∫•u ngo·∫∑c ƒë∆°n sau n√≥.
```

## Truy c·∫≠p k√Ω t·ª±

ƒê·ªÉ l·∫•y m·ªôt k√Ω t·ª± ·ªü v·ªã tr√≠ `pos`, h√£y s·ª≠ d·ª•ng d·∫•u ngo·∫∑c vu√¥ng `[pos]` ho·∫∑c g·ªçi ph∆∞∆°ng th·ª©c [str.charAt(pos)](mdn:js/String/charAt). K√Ω t·ª± ƒë·∫ßu ti√™n b·∫Øt ƒë·∫ßu t·ª´ v·ªã tr√≠ s·ªë 0:

```js run
let str = `Hello`;

// k√Ω t·ª± ƒë·∫ßu ti√™n
alert( str[0] ); // H
alert( str.charAt(0) ); // H

// the last character
alert( str[str.length - 1] ); // o
```

D·∫•u ngo·∫∑c vu√¥ng l√† m·ªôt c√°ch hi·ªán ƒë·∫°i ƒë·ªÉ l·∫•y m·ªôt k√Ω t·ª±, trong khi `charAt` ch·ªß y·∫øu t·ªìn t·∫°i v√¨ l√Ω do l·ªãch s·ª≠.

S·ª± kh√°c bi·ªát duy nh·∫•t gi·ªØa ch√∫ng l√† n·∫øu kh√¥ng t√¨m th·∫•y k√Ω t·ª± n√†o, `[]` tr·∫£ v·ªÅ `undefined`, v√† `charAt` tr·∫£ v·ªÅ m·ªôt chu·ªói r·ªóng:

```js run
let str = `Xin ch√†o`;

alert( str[1000] ); // undefined
alert( str.charAt(1000) ); // '' (m·ªôt chu·ªói r·ªóng)
```

Ch√∫ng ta c≈©ng c√≥ th·ªÉ l·∫∑p l·∫°i c√°c k√Ω t·ª± b·∫±ng c√°ch s·ª≠ d·ª•ng `for..of`:

```js run
for (let char of "Hello") {
  alert(char); // H,e,l,l,o (char tr·ªü th√†nh "H", r·ªìi "e", r·ªìi "l", v.v.)
}
```

## Chu·ªói l√† b·∫•t bi·∫øn

Kh√¥ng th·ªÉ thay ƒë·ªïi chu·ªói trong JavaScript. Kh√¥ng th·ªÉ thay ƒë·ªïi m·ªôt nh√¢n v·∫≠t.

H√£y th·ª≠ ƒë·ªÉ ch·ª©ng minh r·∫±ng n√≥ kh√¥ng ho·∫°t ƒë·ªông:

```js run
let str = 'Hi';

str[0] = 'h'; // l·ªói
alert( str[0] ); // kh√¥ng ho·∫°t ƒë·ªông
```

C√°ch gi·∫£i quy·∫øt th√¥ng th∆∞·ªùng l√† t·∫°o m·ªôt chu·ªói ho√†n to√†n m·ªõi v√† g√°n n√≥ cho `str` thay v√¨ chu·ªói c≈©.

V√≠ d·ª•:

```js run
let str = 'Hi';

str = 'h' + str[1]; // thay th·∫ø chu·ªói

alert( str ); // hi
```

Trong c√°c ph·∫ßn sau ch√∫ng ta s·∫Ω th·∫•y nhi·ªÅu v√≠ d·ª• h∆°n v·ªÅ ƒëi·ªÅu n√†y.

## Thay ƒë·ªïi ki·ªÉu ch·ªØ

C√°c ph∆∞∆°ng th·ª©c [toLowerCase()](mdn:js/String/toLowerCase) v√† [toUpperCase()](mdn:js/String/toUpperCase) thay ƒë·ªïi ki·ªÉu ch·ªØ:

```js run
  alert( 'Interface'.toUpperCase() ); // INTERFACE
alert( 'Interface'.toLowerCase() ); // Interface
```

Ho·∫∑c, n·∫øu ch√∫ng ta mu·ªën m·ªôt k√Ω t·ª± ƒë∆∞·ª£c vi·∫øt th∆∞·ªùng:

```js
alert( 'Interface'[0].toLowerCase() ); // 'i'
```

## T√¨m ki·∫øm m·ªôt chu·ªói con

C√≥ nhi·ªÅu c√°ch ƒë·ªÉ t√¨m ki·∫øm m·ªôt chu·ªói con trong m·ªôt chu·ªói.

### str.indexOf

Ph∆∞∆°ng th·ª©c ƒë·∫ßu ti√™n l√† [str.indexOf(substr, pos)](mdn:js/String/indexOf).

N√≥ t√¨m ki·∫øm `substr` trong `str`, b·∫Øt ƒë·∫ßu t·ª´ v·ªã tr√≠ ƒë√£ cho `pos` v√† tr·∫£ v·ªÅ v·ªã tr√≠ t√¨m th·∫•y k·∫øt qu·∫£ kh·ªõp ho·∫∑c `-1` n·∫øu kh√¥ng t√¨m th·∫•y g√¨.

V√≠ d·ª•:

```js run
let str = 'Widget with id';

alert( str.indexOf('Widget') ); // 0, b·ªüi v√¨ 'Widget' ƒë∆∞·ª£c t√¨m th·∫•y ngay t·ª´ ƒë·∫ßu
alert( str.indexOf('widget') ); // -1, kh√¥ng t√¨m th·∫•y, t√¨m ki·∫øm ph√¢n bi·ªát ch·ªØ hoa ch·ªØ th∆∞·ªùng

alert( str.indexOf("id") ); // 1, "id" ƒë∆∞·ª£c t√¨m th·∫•y ·ªü v·ªã tr√≠ 1 (..idget v·ªõi id)
```

Tham s·ªë th·ª© hai t√πy ch·ªçn cho ph√©p ch√∫ng ta b·∫Øt ƒë·∫ßu t√¨m ki·∫øm t·ª´ m·ªôt v·ªã tr√≠ nh·∫•t ƒë·ªãnh.

Ch·∫≥ng h·∫°n, l·∫ßn xu·∫•t hi·ªán ƒë·∫ßu ti√™n c·ªßa `"id"` l√† ·ªü v·ªã tr√≠ `1`. ƒê·ªÉ t√¨m ki·∫øm l·∫ßn xu·∫•t hi·ªán ti·∫øp theo, h√£y b·∫Øt ƒë·∫ßu t√¨m ki·∫øm t·ª´ v·ªã tr√≠ `2`:

```js run
let str = 'Widget with id';

alert( str.indexOf('id', 2) ) // 12
```

N·∫øu ch√∫ng ta quan t√¢m ƒë·∫øn t·∫•t c·∫£ c√°c l·∫ßn xu·∫•t hi·ªán, ch√∫ng t√¥i c√≥ th·ªÉ ch·∫°y `indexOf` trong m·ªôt v√≤ng l·∫∑p. M·ªói cu·ªôc g·ªçi m·ªõi ƒë∆∞·ª£c th·ª±c hi·ªán v·ªõi v·ªã tr√≠ sau s·ª± tr√πng kh·ªõp tr∆∞·ªõc ƒë√≥:

```js run
let str = 'As sly as a fox, as strong as an ox';

let target = 'as'; // h√£y t√¨m ki·∫øm n√≥

let pos = 0;
while (true) {
  let foundPos = str.indexOf(target, pos);
  if (foundPos == -1) break;

  alert( `ƒê√£ t√¨m th·∫•y t·∫°i ${foundPos}` );
  pos = foundPos + 1; // ti·∫øp t·ª•c t√¨m ki·∫øm t·ª´ v·ªã tr√≠ ti·∫øp theo
}
```

Thu·∫≠t to√°n t∆∞∆°ng t·ª± c√≥ th·ªÉ ƒë∆∞·ª£c tr√¨nh b√†y ng·∫Øn h∆°n:

```js run
let str = "As sly as a fox, as strong as an ox";
let target = "as";

*!*
let pos = -1;
while ((pos = str.indexOf(target, pos + 1)) != -1) {
  alert( pos );
}
*/!*
```

```smart header="`str.lastIndexOf(substr, position)`"
Ngo√†i ra c√≤n c√≥ m·ªôt ph∆∞∆°ng th·ª©c t∆∞∆°ng t·ª± [str.lastIndexOf(substr, position)](mdn:js/String/lastIndexOf) t√¨m ki·∫øm t·ª´ cu·ªëi chu·ªói ƒë·∫øn ƒë·∫ßu chu·ªói.

N√≥ s·∫Ω li·ªát k√™ c√°c l·∫ßn xu·∫•t hi·ªán theo th·ª© t·ª± ng∆∞·ª£c l·∫°i.
```

C√≥ m·ªôt ch√∫t b·∫•t ti·ªán v·ªõi `indexOf` trong b√†i ki·ªÉm tra `if`. Ch√∫ng ta kh√¥ng th·ªÉ ƒë·∫∑t n√≥ trong `if` nh∆∞ th·∫ø n√†y:

```js run
let str = "Widget with id";

if (str.indexOf("Widget")) {
    alert("Ch√∫ng ta ƒë√£ t√¨m th·∫•y n√≥"); // kh√¥ng ho·∫°t ƒë·ªông!
}
```

`alert` trong v√≠ d·ª• tr√™n kh√¥ng hi·ªÉn th·ªã v√¨ `str.indexOf("Widget")` tr·∫£ v·ªÅ `0` (c√≥ nghƒ©a l√† n√≥ t√¨m th·∫•y k·∫øt qu·∫£ kh·ªõp ·ªü v·ªã tr√≠ b·∫Øt ƒë·∫ßu). ƒê√∫ng, nh∆∞ng `if` coi `0` l√† `false`.

V√¨ v·∫≠y, ch√∫ng ta th·ª±c s·ª± n√™n ki·ªÉm tra `-1`, nh∆∞ sau:

```js run
let str = "Widget with id";

*!*
if (str.indexOf("Widget") != -1) {
*/!*
    alert("Ch√∫ng ta ƒë√£ t√¨m th·∫•y n√≥"); // b√¢y gi·ªù ho·∫°t ƒë·ªông!
}
```

#### Th·ªß thu·∫≠t KH√îNG theo bit

M·ªôt trong nh·ªØng th·ªß thu·∫≠t c≈© ƒë∆∞·ª£c s·ª≠ d·ª•ng ·ªü ƒë√¢y l√† to√°n t·ª≠ [bitwise NOT](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_NOT) `~`. N√≥ chuy·ªÉn ƒë·ªïi s·ªë th√†nh s·ªë nguy√™n 32 bit (lo·∫°i b·ªè ph·∫ßn th·∫≠p ph√¢n n·∫øu c√≥) v√† sau ƒë√≥ ƒë·∫£o ng∆∞·ª£c t·∫•t c·∫£ c√°c bit trong bi·ªÉu di·ªÖn nh·ªã ph√¢n c·ªßa n√≥.

Trong th·ª±c t·∫ø, ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† m·ªôt ƒëi·ªÅu ƒë∆°n gi·∫£n: ƒë·ªëi v·ªõi s·ªë nguy√™n 32 bit `~n` b·∫±ng `-(n+1)`.

V√≠ d·ª•:

```js run
alert( ~2 ); // -3, gi·ªëng nh∆∞ -(2+1)
alert( ~1 ); // -2, gi·ªëng nh∆∞ -(1+1)
alert( ~0 ); // -1, gi·ªëng nh∆∞ -(0+1)
*!*
alert( ~-1 ); // 0, gi·ªëng nh∆∞ -(-1+1)
*/!*
```

Nh∆∞ ch√∫ng ta c√≥ th·ªÉ th·∫•y, `~n` ch·ªâ b·∫±ng 0 n·∫øu `n == -1` (ƒë√≥ l√† ƒë·ªëi v·ªõi b·∫•t k·ª≥ s·ªë nguy√™n c√≥ d·∫•u 32 bit n√†o `n`).

V√¨ v·∫≠y, ph√©p th·ª≠ `if ( ~str.indexOf("...") )` ch·ªâ ƒë√∫ng n·∫øu k·∫øt qu·∫£ c·ªßa `indexOf` kh√¥ng ph·∫£i l√† `-1`. N√≥i c√°ch kh√°c, khi c√≥ m·ªôt s·ª± tr√πng kh·ªõp.

M·ªçi ng∆∞·ªùi s·ª≠ d·ª•ng n√≥ ƒë·ªÉ r√∫t ng·∫Øn ki·ªÉm tra `indexOf`:

```js run
let str = "Widget";

if (~str.indexOf("Widget")) {
  alert( 'ƒê√£ t√¨m th·∫•y n√≥¬∑!' ); // ho·∫°t ƒë·ªông
}
```

Th√¥ng th∆∞·ªùng kh√¥ng n√™n s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng ng√¥n ng·ªØ theo c√°ch kh√¥ng r√µ r√†ng, nh∆∞ng th·ªß thu·∫≠t c·ª• th·ªÉ n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i trong m√£ c≈©, v√¨ v·∫≠y ch√∫ng ta n√™n hi·ªÉu n√≥.

Ch·ªâ c·∫ßn nh·ªõ: `if (~str.indexOf(...))` ƒë·ªçc l√† "n·∫øu t√¨m th·∫•y".

Tuy nhi√™n, n√≥i m·ªôt c√°ch ch√≠nh x√°c, v√¨ c√°c s·ªë l·ªõn b·ªã c·∫Øt b·ªõt th√†nh 32 bit b·ªüi to√°n t·ª≠ `~`, n√™n t·ªìn t·∫°i c√°c s·ªë kh√°c cho `0`, s·ªë nh·ªè nh·∫•t l√† `~4294967295=0`. ƒêi·ªÅu ƒë√≥ l√†m cho ki·ªÉm tra nh∆∞ v·∫≠y ch·ªâ ch√≠nh x√°c n·∫øu m·ªôt chu·ªói kh√¥ng d√†i.

Hi·ªán t·∫°i, ch√∫ng ta ch·ªâ c√≥ th·ªÉ th·∫•y th·ªß thu·∫≠t n√†y trong m√£ c≈©, v√¨ JavaScript hi·ªán ƒë·∫°i cung c·∫•p ph∆∞∆°ng th·ª©c `.includes` (xem b√™n d∆∞·ªõi).

### includes, startsWith, endsWith

Ph∆∞∆°ng th·ª©c hi·ªán ƒë·∫°i h∆°n [str.includes(substr, pos)](mdn:js/String/includes) tr·∫£ v·ªÅ `true/false` t√πy thu·ªôc v√†o vi·ªác `str` c√≥ ch·ª©a `substr` b√™n trong hay kh√¥ng.

ƒê√≥ l√† l·ª±a ch·ªçn ph√π h·ª£p n·∫øu ch√∫ng ta c·∫ßn ki·ªÉm tra s·ª± tr√πng kh·ªõp, nh∆∞ng kh√¥ng c·∫ßn v·ªã tr√≠ c·ªßa n√≥:

```js run
alert( "Widget with id".includes("Widget") ); // true

alert( "Hello".includes("Bye") ); // false
```

ƒê·ªëi s·ªë th·ª© hai t√πy ch·ªçn c·ªßa `str.includes` l√† v·ªã tr√≠ ƒë·ªÉ b·∫Øt ƒë·∫ßu t√¨m ki·∫øm t·ª´:

```js run
alert( "Widget".includes("id") ); // true
alert( "Widget".includes("id", 3) ); // false, t·ª´ v·ªã tr√≠ 3 kh√¥ng c√≥ "id"
```

C√°c ph∆∞∆°ng th·ª©c [str.startsWith](mdn:js/String/startsWith) v√† [str.endsWith](mdn:js/String/endsWith) th·ª±c hi·ªán ch√≠nh x√°c nh·ªØng g√¨ ch√∫ng n√≥i:

```js run
alert( "Widget".startsWith("Wid") ); // true, "Widget" b·∫Øt ƒë·∫ßu b·∫±ng "Wid"
alert( "Widget".endsWith("get") ); // true, "Widget" k·∫øt th√∫c b·∫±ng "get"
```

## L·∫•y m·ªôt chu·ªói con

C√≥ 3 ph∆∞∆°ng th·ª©c trong JavaScript ƒë·ªÉ l·∫•y chu·ªói con: `substring`, `substr` v√† `slice`.

`str.slice(start [, end])`
: Tr·∫£ v·ªÅ m·ªôt ph·∫ßn c·ªßa chu·ªói t·ª´ `start` ƒë·∫øn (nh∆∞ng kh√¥ng bao g·ªìm) `end`.

    V√≠ d·ª•:

    ```js run
    let str = "stringify";
    alert( str.slice(0, 5) ); // 'strin', chu·ªói con t·ª´ 0 ƒë·∫øn 5 (kh√¥ng bao g·ªìm 5)
    alert( str.slice(0, 1) ); // 's', t·ª´ 0 ƒë·∫øn 1, nh∆∞ng kh√¥ng bao g·ªìm 1, v√¨ v·∫≠y ch·ªâ k√Ω t·ª± ·ªü 0
    ```

    N·∫øu kh√¥ng c√≥ ƒë·ªëi s·ªë th·ª© hai, th√¨ `slice` s·∫Ω ƒëi ƒë·∫øn cu·ªëi chu·ªói:

    ```js run
    let str = "st*!*ringify*/!*";
    alert( str.slice(2) ); // 'ringify', t·ª´ v·ªã tr√≠ th·ª© 2 ƒë·∫øn cu·ªëi
    ```

   C≈©ng c√≥ th·ªÉ c√≥ c√°c gi√° tr·ªã √¢m cho `start/end`. Ch√∫ng c√≥ nghƒ©a l√† v·ªã tr√≠ ƒë∆∞·ª£c t√≠nh t·ª´ cu·ªëi chu·ªói:

    ```js run
    let str = "strin*!*gif*/!*y";

    // b·∫Øt ƒë·∫ßu ·ªü v·ªã tr√≠ th·ª© 4 t·ª´ b√™n ph·∫£i, k·∫øt th√∫c ·ªü v·ªã tr√≠ th·ª© 1 t·ª´ b√™n ph·∫£i
    alert( str.slice(-4, -1) ); // 'gif'
    ```

`str.substring(start [, end])`
: Tr·∫£ v·ªÅ m·ªôt ph·∫ßn c·ªßa chu·ªói *gi·ªØa* `start` v√† `end`.

    ƒêi·ªÅu n√†y g·∫ßn gi·ªëng v·ªõi `slice`, nh∆∞ng n√≥ cho ph√©p `start` l·ªõn h∆°n `end`.

     V√≠ d·ª•:

    ```js run
    let str = "st*!*ring*/!*ify";

    // nh·ªØng c√°i n√†y gi·ªëng nhau ƒë·ªëi v·ªõi chu·ªói con
    alert( str.substring(2, 6) ); // "ring"
    alert( str.substring(6, 2) ); // "ring"

    // ...nh∆∞ng kh√¥ng ph·∫£i cho l√°t c·∫Øt:
    alert( str.slice(2, 6) ); // "ring" (gi·ªëng nhau)
    alert( str.slice(6, 2) ); // "" (m·ªôt chu·ªói r·ªóng)

    ```

    C√°c ƒë·ªëi s·ªë ph·ªß ƒë·ªãnh (kh√¥ng gi·ªëng nh∆∞ l√°t c·∫Øt) kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£, ch√∫ng ƒë∆∞·ª£c coi l√† `0`.

`str.substr(start [, length])`
: Tr·∫£ v·ªÅ m·ªôt ph·∫ßn c·ªßa chu·ªói t·ª´ `b·∫Øt ƒë·∫ßu`, v·ªõi `ƒë·ªô d√†i` ƒë√£ cho.

     Ng∆∞·ª£c l·∫°i v·ªõi c√°c ph∆∞∆°ng ph√°p tr∆∞·ªõc, ph∆∞∆°ng ph√°p n√†y cho ph√©p ch√∫ng ta ch·ªâ ƒë·ªãnh `ƒë·ªô d√†i` thay v√¨ v·ªã tr√≠ k·∫øt th√∫c:

    ```js run
    let str = "st*!*ring*/!*ify";
    alert( str.substr(2, 4) ); // 'ring', t·ª´ v·ªã tr√≠ th·ª© 2 nh·∫≠n ƒë∆∞·ª£c 4 k√Ω t·ª±
    ```

    ƒê·ªëi s·ªë ƒë·∫ßu ti√™n c√≥ th·ªÉ l√† s·ªë √¢m, ƒë∆∞·ª£c t√≠nh t·ª´ cu·ªëi:

    ```js run
    let str = "strin*!*gi*/!*fy";
    alert( str.substr(-4, 2) ); // 'gi', t·ª´ v·ªã tr√≠ th·ª© 4 l·∫•y 2 k√Ω t·ª±
    ```

H√£y t√≥m t·∫Øt l·∫°i c√°c ph∆∞∆°ng ph√°p n√†y ƒë·ªÉ tr√°nh nh·∫ßm l·∫´n:

| ph∆∞∆°ng ph√°p | ch·ªçn... | √¢m b·∫£n |
|---|------------|--------|
| `slice(start, end)` | t·ª´ `start` ƒë·∫øn `end` (kh√¥ng bao g·ªìm `end`) | cho ph√©p s·ªë √¢m |
| `substring(start, end)` | gi·ªØa `start` v√† `end` | gi√° tr·ªã √¢m c√≥ nghƒ©a l√† `0` |
| `substr(start, length)` | t·ª´ `start` l·∫•y c√°c k√Ω t·ª± `length` | cho ph√©p `start` √¢m |

```smart header="Ch·ªçn c√°i n√†o?"
T·∫•t c·∫£ ch√∫ng c√≥ th·ªÉ l√†m c√¥ng vi·ªác. V·ªÅ m·∫∑t h√¨nh th·ª©c, `substr` c√≥ m·ªôt nh∆∞·ª£c ƒëi·ªÉm nh·ªè: n√≥ kh√¥ng ƒë∆∞·ª£c m√¥ t·∫£ trong th√¥ng s·ªë k·ªπ thu·∫≠t JavaScript c·ªët l√µi m√† trong Ph·ª• l·ª•c B, bao g·ªìm c√°c t√≠nh nƒÉng ch·ªâ d√†nh cho tr√¨nh duy·ªát t·ªìn t·∫°i ch·ªß y·∫øu v√¨ l√Ω do l·ªãch s·ª≠. V√¨ v·∫≠y, c√°c m√¥i tr∆∞·ªùng kh√¥ng c√≥ tr√¨nh duy·ªát c√≥ th·ªÉ kh√¥ng h·ªó tr·ª£ n√≥. Nh∆∞ng trong th·ª±c t·∫ø, n√≥ ho·∫°t ƒë·ªông ·ªü m·ªçi n∆°i.

Trong s·ªë hai bi·∫øn th·ªÉ c√≤n l·∫°i, `slice` linh ho·∫°t h∆°n m·ªôt ch√∫t, n√≥ cho ph√©p ƒë·ªëi s·ªë √¢m v√† vi·∫øt ng·∫Øn h∆°n. V√¨ v·∫≠y, ch·ªâ c·∫ßn nh·ªõ `slice` c·ªßa ba ph∆∞∆°ng ph√°p n√†y l√† ƒë·ªß.
```

## So s√°nh chu·ªói

Nh∆∞ ch√∫ng ta ƒë√£ bi·∫øt t·ª´ ch∆∞∆°ng <info:comparison>, c√°c chu·ªói ƒë∆∞·ª£c so s√°nh theo t·ª´ng k√Ω t·ª± theo th·ª© t·ª± b·∫£ng ch·ªØ c√°i.

M·∫∑c d√π, c√≥ m·ªôt s·ªë ƒëi·ªÅu k·ª≥ l·∫°.

1. Ch·ªØ th∆∞·ªùng lu√¥n l·ªõn h∆°n ch·ªØ hoa:

    ```js run
    alert( 'a' > 'Z' ); // true
    ```

2. C√°c ch·ªØ c√°i c√≥ d·∫•u ph·ª• l√† "kh√¥ng theo th·ª© t·ª±":

    ```js run
    alert( '√ñsterreich' > 'Zealand' ); // true
    ```

    ƒêi·ªÅu n√†y c√≥ th·ªÉ d·∫´n ƒë·∫øn k·∫øt qu·∫£ l·∫° n·∫øu ch√∫ng ta s·∫Øp x·∫øp c√°c t√™n qu·ªëc gia n√†y. Th√¥ng th∆∞·ªùng m·ªçi ng∆∞·ªùi s·∫Ω mong ƒë·ª£i `Zealand` s·∫Ω ƒë·ª©ng sau `√ñsterreich` trong danh s√°ch.

ƒê·ªÉ hi·ªÉu ƒëi·ªÅu g√¨ x·∫£y ra, h√£y xem l·∫°i bi·ªÉu di·ªÖn b√™n trong c·ªßa chu·ªói trong JavaScript.

T·∫•t c·∫£ c√°c chu·ªói ƒë∆∞·ª£c m√£ h√≥a b·∫±ng [UTF-16](https://en.wikipedia.org/wiki/UTF-16). ƒê√≥ l√†: m·ªói k√Ω t·ª± c√≥ m·ªôt m√£ s·ªë t∆∞∆°ng ·ª©ng. C√≥ nh·ªØng ph∆∞∆°ng ph√°p ƒë·∫∑c bi·ªát cho ph√©p l·∫•y k√Ω t·ª± cho m√£ v√† ng∆∞·ª£c l·∫°i.

`str.codePointAt(pos)`
: Tr·∫£ v·ªÅ m√£ cho k√Ω t·ª± t·∫°i v·ªã tr√≠ `pos`:

    ```js run
    // c√°c ch·ªØ c√°i vi·∫øt hoa v√† vi·∫øt th∆∞·ªùng c√≥ m√£ kh√°c nhau
    alert( "z".codePointAt(0) ); // 122
    alert( "Z".codePointAt(0) ); // 90
    ```

`String.fromCodePoint(code)`
: T·∫°o m·ªôt k√Ω t·ª± b·∫±ng s·ªë `code` c·ªßa n√≥

    ```js run
    alert( String.fromCodePoint(90) ); // Z
    ```

   Ch√∫ng ta c≈©ng c√≥ th·ªÉ th√™m c√°c k√Ω t·ª± Unicode theo m√£ c·ªßa ch√∫ng b·∫±ng c√°ch s·ª≠ d·ª•ng `\u` theo sau l√† m√£ hex:

    ```js run
    // 90 l√† 5a trong h·ªá th·∫≠p l·ª•c ph√¢n
    alert( '\u005a' ); // Z
    ```

B√¢y gi·ªù, h√£y xem c√°c k√Ω t·ª± c√≥ m√£ `65..220` (b·∫£ng ch·ªØ c√°i Latinh v√† th√™m m·ªôt ch√∫t) b·∫±ng c√°ch t·∫°o m·ªôt chu·ªói g·ªìm ch√∫ng:

```js run
let str = '';

for (let i = 65; i <= 220; i++) {
  str += String.fromCodePoint(i);
}
alert( str );
// ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}
// ¬°¬¢¬£¬§¬•¬¶¬ß¬®¬©¬™¬´¬¨¬Æ¬Ø¬∞¬±¬≤¬≥¬¥¬µ¬∂¬∑¬∏¬π¬∫¬ª¬º¬Ω¬æ¬ø√Ä√Å√Ç√É√Ñ√Ö√Ü√á√à√â√ä√ã√å√ç√é√è√ê√ë√í√ì√î√ï√ñ√ó√ò√ô√ö√õ√ú
```

Th·∫•y ch∆∞a? C√°c k√Ω t·ª± vi·∫øt hoa xu·∫•t hi·ªán tr∆∞·ªõc, sau ƒë√≥ l√† m·ªôt v√†i k√Ω t·ª± ƒë·∫∑c bi·ªát, sau ƒë√≥ l√† c√°c k√Ω t·ª± vi·∫øt th∆∞·ªùng v√† `√ñ` ·ªü g·∫ßn cu·ªëi ƒë·∫ßu ra.

B√¢y gi·ªù th√¨ r√µ r√†ng l√† t·∫°i sao `a > Z`.

C√°c k√Ω t·ª± ƒë∆∞·ª£c so s√°nh b·∫±ng m√£ s·ªë c·ªßa ch√∫ng. M√£ l·ªõn h∆°n c√≥ nghƒ©a l√† k√Ω t·ª± l·ªõn h∆°n. M√£ c·ªßa `a` (97) l·ªõn h∆°n m√£ c·ªßa `Z` (90).

- T·∫•t c·∫£ c√°c ch·ªØ th∆∞·ªùng ƒëi sau c√°c ch·ªØ in hoa v√¨ m√£ c·ªßa ch√∫ng l·ªõn h∆°n.
- M·ªôt s·ªë ch·ªØ c√°i nh∆∞ `√ñ` ƒë·ª©ng ngo√†i b·∫£ng ch·ªØ c√°i ch√≠nh. ·ªû ƒë√¢y, m√£ c·ªßa n√≥ l·ªõn h∆°n b·∫•t k·ª≥ th·ª© g√¨ t·ª´ `a` ƒë·∫øn `z`.

### So s√°nh ƒë√∫ng [#true-comparisons]

Thu·∫≠t to√°n "ƒë√∫ng" ƒë·ªÉ th·ª±c hi·ªán so s√°nh chu·ªói ph·ª©c t·∫°p h∆°n v·∫ª ngo√†i c·ªßa n√≥, b·ªüi v√¨ c√°c b·∫£ng ch·ªØ c√°i kh√°c nhau ƒë·ªëi v·ªõi c√°c ng√¥n ng·ªØ kh√°c nhau.

V√¨ v·∫≠y, tr√¨nh duy·ªát c·∫ßn bi·∫øt ng√¥n ng·ªØ ƒë·ªÉ so s√°nh.

May m·∫Øn thay, t·∫•t c·∫£ c√°c tr√¨nh duy·ªát hi·ªán ƒë·∫°i (IE10- y√™u c·∫ßu th∆∞ vi·ªán b·ªï sung [Intl.js](https://github.com/andyearnshaw/Intl.js/)) ƒë·ªÅu h·ªó tr·ª£ ti√™u chu·∫©n qu·ªëc t·∫ø h√≥a [ECMA-402](http://www. ecma-international.org/ecma-402/1.0/ECMA-402.pdf).

N√≥ cung c·∫•p m·ªôt ph∆∞∆°ng ph√°p ƒë·∫∑c bi·ªát ƒë·ªÉ so s√°nh c√°c chu·ªói trong c√°c ng√¥n ng·ªØ kh√°c nhau, tu√¢n theo c√°c quy t·∫Øc c·ªßa ch√∫ng.

L·ªánh g·ªçi [str.localeCompare(str2)](mdn:js/String/localeCompare) tr·∫£ v·ªÅ m·ªôt s·ªë nguy√™n cho bi·∫øt `str` nh·ªè h∆°n, b·∫±ng hay l·ªõn h∆°n `str2` theo quy t·∫Øc ng√¥n ng·ªØ:

- Tr·∫£ v·ªÅ s·ªë √¢m n·∫øu `str` nh·ªè h∆°n `str2`.
- Tr·∫£ v·ªÅ m·ªôt s·ªë d∆∞∆°ng n·∫øu `str` l·ªõn h∆°n `str2`.
- Tr·∫£ v·ªÅ `0` n·∫øu ch√∫ng b·∫±ng nhau.

V√≠ d·ª•:

```js run
alert( '√ñsterreich'.localeCompare('Zealand') ); // -1
```

Ph∆∞∆°ng th·ª©c n√†y th·ª±c s·ª± c√≥ hai ƒë·ªëi s·ªë b·ªï sung ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh trong [t√†i li·ªáu](mdn:js/String/localeCompare), cho ph√©p ph∆∞∆°ng th·ª©c n√†y ch·ªâ ƒë·ªãnh ng√¥n ng·ªØ (theo m·∫∑c ƒë·ªãnh ƒë∆∞·ª£c l·∫•y t·ª´ m√¥i tr∆∞·ªùng, th·ª© t·ª± ch·ªØ c√°i ph·ª• thu·ªôc v√†o ng√¥n ng·ªØ) v√† thi·∫øt l·∫≠p c√°c quy t·∫Øc b·ªï sung nh∆∞ ph√¢n bi·ªát ch·ªØ hoa ch·ªØ th∆∞·ªùng ho·∫∑c n√™n coi `"a"` v√† `"√°"` nh∆∞ nhau, v.v.

## Ki·∫øn th·ª©c n√¢ng cao"
Ph·∫ßn n√†y ƒëi s√¢u h∆°n v√†o b√™n trong chu·ªói. Ki·∫øn th·ª©c n√†y s·∫Ω h·ªØu √≠ch cho b·∫°n n·∫øu b·∫°n ƒë·ªãnh x·ª≠ l√Ω bi·ªÉu t∆∞·ª£ng c·∫£m x√∫c, k√Ω t·ª± to√°n h·ªçc ho·∫∑c ch·ªØ t∆∞·ª£ng h√¨nh hi·∫øm ho·∫∑c c√°c k√Ω hi·ªáu hi·∫øm kh√°c.

B·∫°n c√≥ th·ªÉ b·ªè qua ph·∫ßn n√†y n·∫øu b·∫°n kh√¥ng c√≥ k·∫ø ho·∫°ch h·ªó tr·ª£ ch√∫ng.
```

### C·∫∑p thay th·∫ø

T·∫•t c·∫£ c√°c k√Ω t·ª± ƒë∆∞·ª£c s·ª≠ d·ª•ng th∆∞·ªùng xuy√™n ƒë·ªÅu c√≥ m√£ 2 byte. C√°c ch·ªØ c√°i trong h·∫ßu h·∫øt c√°c ng√¥n ng·ªØ ch√¢u √Çu, s·ªë v√† th·∫≠m ch√≠ h·∫ßu h·∫øt c√°c ch·ªØ t∆∞·ª£ng h√¨nh ƒë·ªÅu c√≥ bi·ªÉu di·ªÖn 2 byte.

Nh∆∞ng 2 byte ch·ªâ cho ph√©p 65536 k·∫øt h·ª£p v√† ƒëi·ªÅu ƒë√≥ l√† kh√¥ng ƒë·ªß cho m·ªçi bi·ªÉu t∆∞·ª£ng c√≥ th·ªÉ. V√¨ v·∫≠y, c√°c k√Ω hi·ªáu hi·∫øm ƒë∆∞·ª£c m√£ h√≥a b·∫±ng m·ªôt c·∫∑p k√Ω t·ª± 2 byte ƒë∆∞·ª£c g·ªçi l√† "c·∫∑p thay th·∫ø".

ƒê·ªô d√†i c·ªßa c√°c k√Ω hi·ªáu nh∆∞ v·∫≠y l√† `2`:

```js run
alert( 'ùí≥'.length ); // 2, CH·ªÆ VI·∫æT HOA TO√ÅN H·ªåC X
alert( 'üòÇ'.length ); // 2, M·∫∂T V·ªöI GI·ªåT N∆Ø·ªöC M·∫ÆT VUI
alert( '©∑∂'.length ); // 2, m·ªôt ch·ªØ t∆∞·ª£ng h√¨nh hi·∫øm c·ªßa Trung Qu·ªëc
```

L∆∞u √Ω r·∫±ng c√°c c·∫∑p thay th·∫ø kh√¥ng t·ªìn t·∫°i v√†o th·ªùi ƒëi·ªÉm JavaScript ƒë∆∞·ª£c t·∫°o v√† do ƒë√≥ kh√¥ng ƒë∆∞·ª£c ng√¥n ng·ªØ x·ª≠ l√Ω ch√≠nh x√°c!

Ch√∫ng ta th·ª±c s·ª± c√≥ m·ªôt k√Ω hi·ªáu duy nh·∫•t trong m·ªói chu·ªói ·ªü tr√™n, nh∆∞ng `ƒë·ªô d√†i` hi·ªÉn th·ªã ƒë·ªô d√†i `2`.

`String.fromCodePoint` v√† `str.codePointAt` l√† m·ªôt v√†i ph∆∞∆°ng ph√°p hi·∫øm hoi ƒë·ªëi ph√≥ v·ªõi c√°c c·∫∑p thay th·∫ø ƒë√∫ng. G·∫ßn ƒë√¢y ch√∫ng ƒë√£ xu·∫•t hi·ªán trong ng√¥n ng·ªØ. Tr∆∞·ªõc ch√∫ng, ƒë√£ ch·ªâ c√≥ [String.fromCharCode](mdn:js/String/fromCharCode) v√† [str.charCodeAt](mdn:js/String/charCodeAt). Nh·ªØng ph∆∞∆°ng ph√°p n√†y th·ª±c s·ª± gi·ªëng nh∆∞ `fromCodePoint/codePointAt`, nh∆∞ng kh√¥ng ho·∫°t ƒë·ªông v·ªõi c√°c c·∫∑p thay th·∫ø.

L·∫•y m·ªôt bi·ªÉu t∆∞·ª£ng c√≥ th·ªÉ kh√≥ khƒÉn, b·ªüi v√¨ c√°c c·∫∑p thay th·∫ø ƒë∆∞·ª£c coi l√† hai k√Ω t·ª±:

```js run
alert( 'ùí≥'[0] ); // k√Ω t·ª± l·∫°...
alert( 'ùí≥'[1] ); // ...c√°c m·∫£nh c·ªßa c·∫∑p thay th·∫ø
```

L∆∞u √Ω r·∫±ng c√°c ph·∫ßn c·ªßa c·∫∑p thay th·∫ø kh√¥ng c√≥ √Ω nghƒ©a g√¨ n·∫øu kh√¥ng c√≥ nhau. V√¨ v·∫≠y, c√°c c·∫£nh b√°o trong v√≠ d·ª• tr√™n th·ª±c s·ª± hi·ªÉn th·ªã r√°c.

V·ªÅ m·∫∑t k·ªπ thu·∫≠t, c√°c c·∫∑p thay th·∫ø c≈©ng c√≥ th·ªÉ ƒë∆∞·ª£c ph√°t hi·ªán b·∫±ng m√£ c·ªßa ch√∫ng: n·∫øu m·ªôt k√Ω t·ª± c√≥ m√£ trong kho·∫£ng `0xd800..0xdbff`, th√¨ ƒë√≥ l√† ph·∫ßn ƒë·∫ßu ti√™n c·ªßa c·∫∑p thay th·∫ø. K√Ω t·ª± ti·∫øp theo (ph·∫ßn th·ª© hai) ph·∫£i c√≥ m√£ trong kho·∫£ng `0xdc00..0xdfff`. C√°c kho·∫£ng th·ªùi gian n√†y ƒë∆∞·ª£c d√†nh ri√™ng cho c√°c c·∫∑p thay th·∫ø theo ti√™u chu·∫©n.

Trong tr∆∞·ªùng h·ª£p tr√™n:

```js run
// charCodeAt kh√¥ng nh·∫≠n bi·∫øt c·∫∑p thay th·∫ø, v√¨ v·∫≠y n√≥ cung c·∫•p m√£ cho c√°c b·ªô ph·∫≠n

alert( 'ùí≥'.charCodeAt(0).toString(16) ); // d835, gi·ªØa 0xd800 v√† 0xdbff
alert( 'ùí≥'.charCodeAt(1).toString(16) ); // dcb3, gi·ªØa 0xdc00 v√† 0xdfff
```

B·∫°n s·∫Ω t√¨m th·∫•y nhi·ªÅu c√°ch h∆°n ƒë·ªÉ x·ª≠ l√Ω c√°c c·∫∑p thay th·∫ø ·ªü ph·∫ßn sau c·ªßa ch∆∞∆°ng <info:iterable>. C√≥ th·ªÉ c√≥ nh·ªØng th∆∞ vi·ªán ƒë·∫∑c bi·ªát cho ƒëi·ªÅu ƒë√≥, nh∆∞ng kh√¥ng c√≥ g√¨ ƒë·ªß n·ªïi ti·∫øng ƒë·ªÉ ƒë·ªÅ xu·∫•t ·ªü ƒë√¢y.

### D·∫•u ph·ª• v√† chu·∫©n h√≥a

Trong nhi·ªÅu ng√¥n ng·ªØ, c√≥ nh·ªØng k√Ω hi·ªáu bao g·ªìm k√Ω t·ª± c∆° s·ªü c√≥ d·∫•u ·ªü tr√™n/d∆∞·ªõi k√Ω t·ª± ƒë√≥.

Ch·∫≥ng h·∫°n, ch·ªØ `a` c√≥ th·ªÉ l√† k√Ω t·ª± c∆° s·ªü cho: `√†√°√¢√§√£√•ƒÅ`. H·∫ßu h·∫øt c√°c k√Ω t·ª± "t·ªïng h·ª£p" ph·ªï bi·∫øn ƒë·ªÅu c√≥ m√£ ri√™ng trong b·∫£ng UTF-16. Nh∆∞ng kh√¥ng ph·∫£i t·∫•t c·∫£ ch√∫ng, b·ªüi v√¨ c√≥ qu√° nhi·ªÅu k·∫øt h·ª£p c√≥ th·ªÉ.

ƒê·ªÉ h·ªó tr·ª£ c√°c th√†nh ph·∫ßn t√πy √Ω, UTF-16 cho ph√©p ch√∫ng t√¥i s·ª≠ d·ª•ng m·ªôt s·ªë k√Ω t·ª± Unicode: k√Ω t·ª± c∆° s·ªü theo sau l√† m·ªôt ho·∫∑c nhi·ªÅu k√Ω t·ª± "ƒë√°nh d·∫•u" "trang tr√≠" cho n√≥.

V√≠ d·ª•: n·∫øu ch√∫ng ta c√≥ `S` theo sau l√† k√Ω t·ª± "d·∫•u ch·∫•m ph√≠a tr√™n" ƒë·∫∑c bi·ªát (m√£ `\u0307`), th√¨ n√≥ ƒë∆∞·ª£c hi·ªÉn th·ªã l√† ·π†.

```js run
alert( 'S\u0307' ); // SÃá
```

N·∫øu ch√∫ng ta c·∫ßn m·ªôt d·∫•u b·ªï sung ph√≠a tr√™n ch·ªØ c√°i (ho·∫∑c b√™n d∆∞·ªõi n√≥) -- kh√¥ng v·∫•n ƒë·ªÅ g√¨, ch·ªâ c·∫ßn th√™m k√Ω t·ª± d·∫•u c·∫ßn thi·∫øt.

V√≠ d·ª•: n·∫øu ch√∫ng ta th√™m m·ªôt k√Ω t·ª± "d·∫•u ch·∫•m b√™n d∆∞·ªõi" (m√£ `\u0323`), th√¨ ch√∫ng ta s·∫Ω c√≥ "S c√≥ d·∫•u ch·∫•m b√™n tr√™n v√† b√™n d∆∞·ªõi": `·π®`.

V√≠ d·ª•:

```js run
alert( 'S\u0307\u0323' ); // SÃáÃ£
```

ƒêi·ªÅu n√†y mang l·∫°i s·ª± linh ho·∫°t tuy·ªát v·ªùi, nh∆∞ng c≈©ng l√† m·ªôt v·∫•n ƒë·ªÅ th√∫ v·ªã: hai k√Ω t·ª± c√≥ th·ªÉ tr√¥ng gi·ªëng nhau v·ªÅ m·∫∑t tr·ª±c quan, nh∆∞ng ƒë∆∞·ª£c th·ªÉ hi·ªán b·∫±ng c√°c th√†nh ph·∫ßn Unicode kh√°c nhau.

V√≠ d·ª•:

```js run
let s1 = 'S\u0307\u0323'; // SÃáÃ£, S + ch·∫•m tr√™n + ch·∫•m d∆∞·ªõi
let s2 = 'S\u0323\u0307'; // SÃ£Ãá, S + ch·∫•m tr√™n + ch·∫•m d∆∞·ªõi

alert( `s1: ${s1}, s2: ${s2}` );

alert( s1 == s2 ); // false m·∫∑c d√π c√°c k√Ω t·ª± tr√¥ng gi·ªëng h·ªát nhau (?!)
```

ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y, t·ªìn t·∫°i thu·∫≠t to√°n "Chu·∫©n h√≥a Unicode" ƒë∆∞a m·ªói chu·ªói v·ªÅ d·∫°ng "b√¨nh th∆∞·ªùng" duy nh·∫•t.

N√≥ ƒë∆∞·ª£c tri·ªÉn khai b·ªüi [str.normalize()](mdn:js/String/normalize).

```js run
alert( "S\u0307\u0323".normalize() == "S\u0323\u0307".normalize() ); // true
```

Th·∫≠t bu·ªìn c∆∞·ªùi l√† trong t√¨nh hu·ªëng c·ªßa ch√∫ng ta, `normalize()` th·ª±c s·ª± t·∫≠p h·ª£p m·ªôt chu·ªói g·ªìm 3 k√Ω t·ª± th√†nh m·ªôt: `\u1e68` (S c√≥ hai d·∫•u ch·∫•m).

```js run
alert( "S\u0307\u0323".normalize().length ); // 1

alert( "S\u0307\u0323".normalize() == "\u1e68" ); // true
```

Trong th·ª±c t·∫ø, ƒëi·ªÅu n√†y kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ƒë√∫ng. L√Ω do l√† k√Ω hi·ªáu `·π®` l√† "ƒë·ªß ph·ªï bi·∫øn", v√¨ v·∫≠y nh·ªØng ng∆∞·ªùi t·∫°o UTF-16 ƒë√£ ƒë∆∞a n√≥ v√†o b·∫£ng ch√≠nh v√† ƒë·∫∑t m√£ cho n√≥.

N·∫øu b·∫°n mu·ªën t√¨m hi·ªÉu th√™m v·ªÅ c√°c bi·∫øn th·ªÉ v√† quy t·∫Øc chu·∫©n h√≥a -- ch√∫ng ƒë∆∞·ª£c m√¥ t·∫£ trong ph·∫ßn ph·ª• l·ª•c c·ªßa ti√™u chu·∫©n Unicode: [Bi·ªÉu m·∫´u chu·∫©n h√≥a Unicode](http://www.unicode.org/reports/tr15/), nh∆∞ng ƒë·ªëi v·ªõi h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p th·ª±c t·∫ø m·ª•c ƒë√≠ch th√¥ng tin t·ª´ ph·∫ßn n√†y l√† ƒë·ªß.

## T√≥m t·∫Øt

- C√≥ 3 lo·∫°i tr√≠ch d·∫´n. Backticks cho ph√©p m·ªôt chu·ªói m·ªü r·ªông tr√™n nhi·ªÅu d√≤ng v√† nh√∫ng c√°c bi·ªÉu th·ª©c `${‚Ä¶}`.
- C√°c chu·ªói trong JavaScript ƒë∆∞·ª£c m√£ h√≥a b·∫±ng UTF-16.
- Ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c k√Ω t·ª± ƒë·∫∑c bi·ªát nh∆∞ `\n` v√† ch√®n c√°c ch·ªØ c√°i theo Unicode c·ªßa ch√∫ng b·∫±ng c√°ch s·ª≠ d·ª•ng `\u...`.
- ƒê·ªÉ l·∫•y m·ªôt k√Ω t·ª±, s·ª≠ d·ª•ng: `[]`.
- ƒê·ªÉ l·∫•y chu·ªói con, d√πng: `slice` ho·∫∑c `substring`.
- ƒê·ªÉ vi·∫øt th∆∞·ªùng/vi·∫øt hoa m·ªôt chu·ªói, s·ª≠ d·ª•ng: `toLowerCase/toUpperCase`.
- ƒê·ªÉ t√¨m m·ªôt chu·ªói con, h√£y s·ª≠ d·ª•ng: `indexOf`, ho·∫∑c `includes/startsWith/endsWith` ƒë·ªÉ ki·ªÉm tra ƒë∆°n gi·∫£n.
- ƒê·ªÉ so s√°nh c√°c chu·ªói theo ng√¥n ng·ªØ, h√£y s·ª≠ d·ª•ng: `localeCompare`, n·∫øu kh√¥ng th√¨ ch√∫ng ƒë∆∞·ª£c so s√°nh b·∫±ng m√£ k√Ω t·ª±.

C√≥ m·ªôt s·ªë ph∆∞∆°ng ph√°p h·ªØu √≠ch kh√°c trong chu·ªói:

- `str.trim()` -- x√≥a kho·∫£ng tr·∫Øng ("trims") kh·ªèi ƒë·∫ßu v√† cu·ªëi chu·ªói.
- `str.repeat(n)` -- l·∫∑p l·∫°i chu·ªói `n` l·∫ßn.
- ...v√† nhi·ªÅu h∆°n n·ªØa ƒë∆∞·ª£c t√¨m th·∫•y trong [h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng](mdn:js/String).

C√°c chu·ªói c≈©ng c√≥ c√°c ph∆∞∆°ng th·ª©c ƒë·ªÉ th·ª±c hi·ªán t√¨m ki·∫øm/thay th·∫ø b·∫±ng c√°c bi·ªÉu th·ª©c th√¥ng th∆∞·ªùng. Nh∆∞ng ƒë√≥ l√† ch·ªß ƒë·ªÅ l·ªõn n√™n n√≥ ƒë∆∞·ª£c gi·∫£i th√≠ch trong ph·∫ßn h∆∞·ªõng d·∫´n ri√™ng bi·ªát <info:regular-expressions>.
